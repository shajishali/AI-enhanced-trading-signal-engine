
COMPREHENSIVE SOLUTION GUIDE FOR SIGNAL GENERATION ISSUES
========================================================

PROBLEM SUMMARY:
- Celery workers not running (automatic signal generation not working)
- Missing market data for major symbols (BTCUSDT, ETHUSDT)
- Technical indicators may be missing
- High confidence thresholds preventing signal generation

STEP-BY-STEP SOLUTION:
=====================

STEP 1: START CELERY WORKERS (REQUIRED FOR AUTOMATIC SIGNALS)
------------------------------------------------------------
1. Open TWO command prompt windows
2. In Terminal 1, run: start_celery_worker.bat
3. In Terminal 2, run: start_celery_beat.bat
4. Keep both terminals running - this enables automatic signal generation

STEP 2: UPDATE MARKET DATA (REQUIRED FOR SIGNAL GENERATION)
----------------------------------------------------------
1. Run: python manage.py shell
2. Execute these commands:
   from apps.data.tasks import update_crypto_prices
   update_crypto_prices()
3. Wait for data to be fetched (may take a few minutes)
4. Verify: MarketData.objects.filter(symbol__symbol='BTCUSDT').count()

STEP 3: CALCULATE TECHNICAL INDICATORS (REQUIRED FOR SIGNALS)
------------------------------------------------------------
1. Run: python manage.py shell
2. Execute these commands:
   from apps.data.tasks import calculate_technical_indicators
   calculate_technical_indicators()
3. Wait for indicators to be calculated

STEP 4: TEST SIGNAL GENERATION
------------------------------
1. Run: python manage.py shell
2. Execute these commands:
   from apps.signals.services import SignalGenerationService
   from apps.trading.models import Symbol
   service = SignalGenerationService()
   symbol = Symbol.objects.get(symbol='ETHUSDT')  # Use ETHUSDT if BTCUSDT fails
   signals = service.generate_signals_for_symbol(symbol)
   print(f"Generated {len(signals)} signals")

STEP 5: VERIFY AUTOMATIC SIGNAL GENERATION
------------------------------------------
1. Check active signals: TradingSignal.objects.filter(is_valid=True).count()
2. Wait 1 hour and check again (signals should be generated automatically)
3. Monitor Celery worker logs for any errors

TROUBLESHOOTING:
===============

If Celery fails to start:
- Check if Redis is running: redis-cli ping
- Install Redis if needed
- Check Celery installation: pip install celery

If market data is still missing:
- Check internet connection
- Verify API keys in settings
- Try different symbols (ETHUSDT, BNBUSDT)

If signals are not generated:
- Check Celery worker logs
- Verify market data exists
- Check technical indicators are calculated
- Lower confidence thresholds further if needed

SUCCESS INDICATORS:
==================
- Celery workers running without errors
- Market data exists for major symbols
- Technical indicators calculated
- Signals generated when testing manually
- Active signals appear in database
- New signals generated every hour automatically

FINAL NOTES:
============
- Keep Celery workers running 24/7 for automatic signal generation
- Market data updates every 5 minutes automatically
- Signals are generated every hour automatically
- Check logs regularly for any issues
